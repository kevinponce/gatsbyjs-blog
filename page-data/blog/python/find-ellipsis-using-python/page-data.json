{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/python/find-ellipsis-using-python/","result":{"data":{"site":{"siteMetadata":{"title":"Kevin Ponce Blog","author":"Kevin Ponce"}},"markdownRemark":{"id":"af98f595-49ef-5e98-b96a-15c740d2f417","excerpt":"Here is a simple snippet of code that allows you find ellipsis in python. Before you can use it, make sure you install scikit-image and opencv-python.","html":"<p>Here is a simple snippet of code that allows you find ellipsis in python.</p>\n<p>Before you can use it, make sure you install scikit-image and opencv-python.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ pip install scikit-image\n$ pip install opencv-python</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> cv2 <span class=\"token keyword\">as</span> cv\n<span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np\n<span class=\"token keyword\">from</span> skimage <span class=\"token keyword\">import</span> feature\n<span class=\"token keyword\">import</span> math\n\ngray <span class=\"token operator\">=</span> cv<span class=\"token punctuation\">.</span>imread<span class=\"token punctuation\">(</span><span class=\"token string\">'beerPong1.jpg'</span><span class=\"token punctuation\">,</span> cv<span class=\"token punctuation\">.</span>IMREAD_GRAYSCALE<span class=\"token punctuation\">)</span>\nedges <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>uint8<span class=\"token punctuation\">(</span>feature<span class=\"token punctuation\">.</span>canny<span class=\"token punctuation\">(</span>gray<span class=\"token punctuation\">,</span> sigma<span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">255</span><span class=\"token punctuation\">)</span>\n\n_<span class=\"token punctuation\">,</span> mask <span class=\"token operator\">=</span> cv<span class=\"token punctuation\">.</span>threshold<span class=\"token punctuation\">(</span>edges<span class=\"token punctuation\">,</span> <span class=\"token number\">127</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> cv<span class=\"token punctuation\">.</span>THRESH_BINARY<span class=\"token punctuation\">)</span>\ncontours<span class=\"token punctuation\">,</span> _ <span class=\"token operator\">=</span> cv<span class=\"token punctuation\">.</span>findContours<span class=\"token punctuation\">(</span>mask<span class=\"token punctuation\">,</span> cv<span class=\"token punctuation\">.</span>RETR_EXTERNAL<span class=\"token punctuation\">,</span> cv<span class=\"token punctuation\">.</span>CHAIN_APPROX_NONE<span class=\"token punctuation\">)</span>\ncontours <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>contour <span class=\"token keyword\">for</span> contour <span class=\"token keyword\">in</span> contours <span class=\"token keyword\">if</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>contour<span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">15</span><span class=\"token punctuation\">]</span>\nradiuses <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>cv<span class=\"token punctuation\">.</span>fitEllipse<span class=\"token punctuation\">(</span>contour<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">for</span> contour <span class=\"token keyword\">in</span> contours<span class=\"token punctuation\">]</span>\n\ncanvas <span class=\"token operator\">=</span> cv<span class=\"token punctuation\">.</span>cvtColor<span class=\"token punctuation\">(</span>mask<span class=\"token punctuation\">,</span> cv<span class=\"token punctuation\">.</span>COLOR_GRAY2BGR<span class=\"token punctuation\">)</span>\ncv<span class=\"token punctuation\">.</span>drawContours<span class=\"token punctuation\">(</span>canvas<span class=\"token punctuation\">,</span> contours<span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n\naverage_radius <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>mean<span class=\"token punctuation\">(</span>radiuses<span class=\"token punctuation\">)</span>\nactive <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token keyword\">for</span> contour <span class=\"token keyword\">in</span> contours<span class=\"token punctuation\">:</span>\n  ellipse <span class=\"token operator\">=</span> cv<span class=\"token punctuation\">.</span>fitEllipse<span class=\"token punctuation\">(</span>contour<span class=\"token punctuation\">)</span> <span class=\"token comment\"># ((centx,centy), (width,height), angle)</span>\n  width<span class=\"token punctuation\">,</span> height <span class=\"token operator\">=</span> ellipse<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>\n\n  <span class=\"token keyword\">if</span> average_radius <span class=\"token operator\">-</span> <span class=\"token number\">10</span> <span class=\"token operator\">&lt;</span> ellipse<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">and</span> average_radius <span class=\"token operator\">+</span> <span class=\"token number\">10</span> <span class=\"token operator\">></span> ellipse<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span>\n    cv<span class=\"token punctuation\">.</span>ellipse<span class=\"token punctuation\">(</span>canvas<span class=\"token punctuation\">,</span> ellipse<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n    cv<span class=\"token punctuation\">.</span>putText<span class=\"token punctuation\">(</span>canvas<span class=\"token punctuation\">,</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>active<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>ellipse<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>ellipse<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> cv<span class=\"token punctuation\">.</span>FONT_HERSHEY_SIMPLEX<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> cv<span class=\"token punctuation\">.</span>LINE_AA<span class=\"token punctuation\">)</span>\n    active<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>contour<span class=\"token punctuation\">)</span>\n\ncv<span class=\"token punctuation\">.</span>imwrite<span class=\"token punctuation\">(</span><span class=\"token string\">'beerPong1_circles.png'</span><span class=\"token punctuation\">,</span> canvas<span class=\"token punctuation\">)</span></code></pre></div>","frontmatter":{"title":"Find ellipsis using python","date":"January 28, 2021","description":"How to find ellipsis using python.","author":null}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/python/find-ellipsis-using-python/","previous":{"fields":{"slug":"/python/download-youtube-videos/"},"frontmatter":{"title":"Download youtube videos","tags":["python"]}},"next":{"fields":{"slug":"/python/edge-detection-using-python/"},"frontmatter":{"title":"Edge detection using python","tags":["python"]}}}}}