{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/python/send-gcode-through-serial-to-a-3d-printer-using-python/","result":{"data":{"site":{"siteMetadata":{"title":"Kevin Ponce Blog","author":"Kevin Ponce"}},"markdownRemark":{"id":"60149e15-fdf4-5a24-91cf-a65610c01505","excerpt":"Here is a simple snippet of code that allows you send gcode commands to a 3d printer through serial(aka usb cable) using python.","html":"<p>Here is a simple snippet of code that allows you send gcode commands to a 3d printer through serial(aka usb cable) using python.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> serial\n<span class=\"token keyword\">import</span> time\n<span class=\"token keyword\">from</span> datetime <span class=\"token keyword\">import</span> datetime\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">command</span><span class=\"token punctuation\">(</span>ser<span class=\"token punctuation\">,</span> command<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n  start_time <span class=\"token operator\">=</span> datetime<span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  ser<span class=\"token punctuation\">.</span>write<span class=\"token punctuation\">(</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span>command<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> \n  time<span class=\"token punctuation\">.</span>sleep<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n    line <span class=\"token operator\">=</span> ser<span class=\"token punctuation\">.</span>readline<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>line<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">if</span> line <span class=\"token operator\">==</span> <span class=\"token string\">b'ok\\n'</span><span class=\"token punctuation\">:</span>\n      <span class=\"token keyword\">break</span>\n\nser <span class=\"token operator\">=</span> serial<span class=\"token punctuation\">.</span>Serial<span class=\"token punctuation\">(</span><span class=\"token string\">'/dev/tty.usbserial-AG0KEQWV'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">115200</span><span class=\"token punctuation\">)</span>\ntime<span class=\"token punctuation\">.</span>sleep<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\ncommand<span class=\"token punctuation\">(</span>ser<span class=\"token punctuation\">,</span> <span class=\"token string\">\"G28\\r\\n\"</span><span class=\"token punctuation\">)</span>\n\n\n\ncommand<span class=\"token punctuation\">(</span>ser<span class=\"token punctuation\">,</span> <span class=\"token string\">\"G28 X0 Y0 Z0\\r\\n\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># command(ser, \"G28 X0 Y0\\r\\n\")</span>\n<span class=\"token comment\"># command(ser, \"G28 X0\\r\\n\")</span>\n<span class=\"token comment\"># command(ser, \"G28 Y0\\r\\n\")</span>\n<span class=\"token comment\"># command(ser, \"G28 Z0\\r\\n\")</span>\n\n<span class=\"token comment\"># Extruder Temp</span>\n<span class=\"token comment\"># command(ser, \"M104 S190 T0\\r\\n\") #  start heating T0 to 190 degrees Celsius</span>\n<span class=\"token comment\"># command(ser, \"G28\\r\\n\") # Home</span>\n<span class=\"token comment\"># command(ser, \"M109 S190 T0\\r\\n\") # wait for T0 to reach 190 degrees before continuing with any other commands</span>\n\n<span class=\"token comment\"># Bed Temp</span>\n<span class=\"token comment\"># command(ser, \"M140 S55\\r\\n\") # heat bed to 50 degrees celsius but do not wait</span>\n<span class=\"token comment\"># command(ser, \"G28\\r\\n\") # Home</span>\n<span class=\"token comment\"># command(ser, \"M190 S55\\r\\n\") # wait for bed to heat to 50 degrees celsius and wait</span>\n\n<span class=\"token comment\"># Fan</span>\n<span class=\"token comment\"># command(ser, \"M106 S255\\r\\n\") # fan speed full</span>\n<span class=\"token comment\"># command(ser, \"M106 S127\\r\\n\") # fan speed about half</span>\n<span class=\"token comment\"># command(ser, \"M106 S0\\r\\n\") # turn off fan</span>\n\n<span class=\"token comment\"># Set Units(does not seem to work on ender 5)</span>\n<span class=\"token comment\"># command(ser, \"G20\\r\\n\") # inches</span>\ncommand<span class=\"token punctuation\">(</span>ser<span class=\"token punctuation\">,</span> <span class=\"token string\">\"G21\\r\\n\"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># millimeters</span>\n\n<span class=\"token comment\"># Absolute Mode</span>\ncommand<span class=\"token punctuation\">(</span>ser<span class=\"token punctuation\">,</span> <span class=\"token string\">\"G90\\r\\n\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># Relative Mode</span>\n<span class=\"token comment\"># command(ser, \"G91 X10\\r\\n\")</span>\n\n<span class=\"token comment\"># Move</span>\n<span class=\"token comment\"># command(ser, \"G0 X7 Y18\\r\\n\") # rapid motion but does not extrude material</span>\ncommand<span class=\"token punctuation\">(</span>ser<span class=\"token punctuation\">,</span> <span class=\"token string\">\"G0 X350 Y350\\r\\n\"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># rapid motion but does not extrude material ender 5 plus is 350 x 350</span>\ncommand<span class=\"token punctuation\">(</span>ser<span class=\"token punctuation\">,</span> <span class=\"token string\">\"G1 Z0.345 F500\\r\\n\"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># change layer</span>\ncommand<span class=\"token punctuation\">(</span>ser<span class=\"token punctuation\">,</span> <span class=\"token string\">\"G0 X50 Y50\\r\\n\"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># rapid motion but does not extrude material ender 5 plus is 350 x 350</span>\n\ntime<span class=\"token punctuation\">.</span>sleep<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\nser<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>","frontmatter":{"title":"Send gcode through serial to a 3D Printer using python","date":"March 03, 2021","description":"How to send gcode through serial to a 3D Printer using python.","author":null}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/python/send-gcode-through-serial-to-a-3d-printer-using-python/","previous":{"fields":{"slug":"/arduino/photocell/"},"frontmatter":{"title":"Arduino Photocell","tags":["arduino"]}},"next":{"fields":{"slug":"/ruby/rails/nested-routes/"},"frontmatter":{"title":"Rails nested routes","tags":["ruby","ruby-on-rails"]}}}}}