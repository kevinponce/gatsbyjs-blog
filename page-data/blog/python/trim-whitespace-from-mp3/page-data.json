{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/python/trim-whitespace-from-mp3/","result":{"data":{"site":{"siteMetadata":{"title":"Kevin Ponce Blog","author":"Kevin Ponce"}},"markdownRemark":{"id":"64699e00-6c50-5a0c-9c4f-39fd66d4c8dc","excerpt":"How to trim whitespace from mp3 file using Python. Before you can use the script, you must install dependencies: Install ffmpeg Mac Linux Install pydub Script:","html":"<p>How to trim whitespace from mp3 file using Python.</p>\n<p>Before you can use the script, you must install dependencies:</p>\n<h1>Install ffmpeg</h1>\n<h2>Mac</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">brew install ffmpeg</code></pre></div>\n<h2>Linux</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo apt-get install ffmpeg</code></pre></div>\n<h1>Install pydub</h1>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">pip install pydub</code></pre></div>\n<h1>Script:</h1>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># mac: brew install ffmpeg</span>\n<span class=\"token comment\"># linux: sudo apt-get install ffmpeg</span>\n<span class=\"token comment\"># pip install pydub</span>\n<span class=\"token keyword\">from</span> pydub <span class=\"token keyword\">import</span> AudioSegment\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">detect_leading_silence</span><span class=\"token punctuation\">(</span>sound<span class=\"token punctuation\">,</span> silence_threshold<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">50.0</span><span class=\"token punctuation\">,</span> chunk_size<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">'''\n    sound is a pydub.AudioSegment\n    silence_threshold in dB\n    chunk_size in ms\n\n    iterate over chunks until you find the first one with sound\n    '''</span>\n    trim_ms <span class=\"token operator\">=</span> <span class=\"token number\">0</span> <span class=\"token comment\"># ms</span>\n\n    <span class=\"token keyword\">assert</span> chunk_size <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token comment\"># to avoid infinite loop</span>\n    <span class=\"token keyword\">while</span> sound<span class=\"token punctuation\">[</span>trim_ms<span class=\"token punctuation\">:</span>trim_ms<span class=\"token operator\">+</span>chunk_size<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>dBFS <span class=\"token operator\">&lt;</span> silence_threshold <span class=\"token keyword\">and</span> trim_ms <span class=\"token operator\">&lt;</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>sound<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        trim_ms <span class=\"token operator\">+=</span> chunk_size\n\n    <span class=\"token keyword\">return</span> trim_ms\n\n<span class=\"token comment\"># 16 KB</span>\nsound <span class=\"token operator\">=</span> AudioSegment<span class=\"token punctuation\">.</span>from_file<span class=\"token punctuation\">(</span><span class=\"token string\">\"example.mp3\"</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">format</span><span class=\"token operator\">=</span><span class=\"token string\">\"mp3\"</span><span class=\"token punctuation\">)</span>\n\nstart_trim <span class=\"token operator\">=</span> detect_leading_silence<span class=\"token punctuation\">(</span>sound<span class=\"token punctuation\">,</span> silence_threshold<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">40.0</span><span class=\"token punctuation\">)</span>\nend_trim <span class=\"token operator\">=</span> detect_leading_silence<span class=\"token punctuation\">(</span>sound<span class=\"token punctuation\">.</span>reverse<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> silence_threshold<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">40.0</span><span class=\"token punctuation\">)</span>\nduration <span class=\"token operator\">=</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>sound<span class=\"token punctuation\">)</span>\ntrimmed_sound <span class=\"token operator\">=</span> sound<span class=\"token punctuation\">[</span>start_trim<span class=\"token punctuation\">:</span>duration<span class=\"token operator\">-</span>end_trim<span class=\"token punctuation\">]</span>\n\ntrimmed_sound<span class=\"token punctuation\">.</span>export<span class=\"token punctuation\">(</span><span class=\"token string\">\"example2.mp3\"</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">format</span><span class=\"token operator\">=</span><span class=\"token string\">\"mp3\"</span><span class=\"token punctuation\">)</span></code></pre></div>","frontmatter":{"title":"Python trim whitespace from mp3","date":"November 16, 2020","description":"How to trim whitespace from mp3 file using Python.","author":null}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/python/trim-whitespace-from-mp3/","previous":{"fields":{"slug":"/arduino/pot/"},"frontmatter":{"title":"Arduino POT","tags":["arduino"]}},"next":{"fields":{"slug":"/python/record-wav-file/"},"frontmatter":{"title":"Python record wav file","tags":["python"]}}}}}