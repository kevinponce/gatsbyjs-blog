{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/rails-cache/","result":{"data":{"site":{"siteMetadata":{"title":"Kevin Ponce Blog","author":"Kevin Ponce"}},"markdownRemark":{"id":"a1d44b43-18f2-549d-a3e1-4f55cbb9c76c","excerpt":"Rails is known for its lack of performance, but one of the biggest bottle neck with any framework is database access. I love active record, but it can be slowâ€¦","html":"<p>Rails is known for its lack of performance, but one of the biggest bottle neck with any framework is database access.</p>\n<p>I love active record, but it can be slow. One thing you can do to improve some queries is add a cache layer.\nThis will skip the database and pull the data from redis or memcached. (depends which one you setup as.)\nI am using Redis, but use it for more than a cache layer. It good for delayed jobs, or store values that need to be accessed later.</p>\n<p>Here is a simple example of using rails cache:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token variable\">@products</span> <span class=\"token operator\">=</span>  <span class=\"token constant\">Rails</span><span class=\"token punctuation\">.</span>cache<span class=\"token punctuation\">.</span>fetch<span class=\"token punctuation\">(</span><span class=\"token string\">'products'</span><span class=\"token punctuation\">,</span> expires_in<span class=\"token punctuation\">:</span> <span class=\"token number\">1.</span>day<span class=\"token punctuation\">)</span> <span class=\"token keyword\">do</span>\n  <span class=\"token constant\">Product</span><span class=\"token punctuation\">.</span>all\n<span class=\"token keyword\">end</span></code></pre></div>\n<p>I personally recommend always using expires_in, because you do not want stale data.</p>\n<p>If for some reason you need to clear the chace layer, simply run the following command:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token constant\">Rails</span><span class=\"token punctuation\">.</span>cache<span class=\"token punctuation\">.</span>delete<span class=\"token punctuation\">(</span><span class=\"token string\">'products'</span><span class=\"token punctuation\">)</span></code></pre></div>","frontmatter":{"title":"Rails cache","date":"February 24, 2020","description":"How to use rails cache and improve your api load time.","author":null}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/rails-cache/","previous":{"fields":{"slug":"/react-fragments/"},"frontmatter":{"title":"React Fragments","tags":["javascript","react"]}},"next":null}}}